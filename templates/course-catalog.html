<!DOCTYPE html>
<html>
<head>
    <title>Course Catalog</title>
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
</head>
<body>
    <header>
        <a href="/student-home"><img class="logo" src="../static/images/classifylogoside.png"></a>
        <div class="btn-group">
            <a href="/about-us-student" class="btn btn-primary">Contact Us!</a>
            <a href="/faq-student"><button type="button" class="btn btn-secondary"><i class="bi-question-lg"></i></button></a>
            <a href="/student-profile"><button type="button" class="btn btn-dark"><i class="bi-person-circle"></i></button></a>
            <a href="/"><button type="button" class="btn btn-danger"><i class="bi bi-box-arrow-right"></i></button></a>
        </div>
    </header>

    <div class="container">
        <h1 class="text-center">Course Catalog</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Course ID</th>
                    <th>Course Name</th>
                    <th>Description</th>
                    <th>Section</th>
                    <th>Total Seats</th>
                    <th>Seats Taken</th>
                    <th>Teacher</th>
                    <th>Dates</th>
                    <th>Timings</th>
                    <th>Register</th> <!-- New column for the Register button -->
                </tr>
            </thead>
            <tbody>
                {% for course in courses %}
                <tr>
                    <td>{{ course.courseID }}</td>
                    <td>{{ course.courseName }}</td>
                    <td>{{ course.description }}</td>
                    <td>{{ course.section }}</td>
                    <td>{{ course.totalSeats }}</td>
                    <td>{{ course.seatsTaken }}</td>
                    <td>{{ course.teacher.user.first_name }} {{ course.teacher.user.last_name }}</td>
                    <td>{{ course.dates }}</td>
                    <td>{{ course.timings }}</td>
                    <td>
                        {% if current_user.is_authenticated %}
                            {% if current_user not in course.students %}
                                <a href="{{ url_for('register_course', course_id=course.courseID) }}" class="btn btn-primary btn-sm">Register</a>
                            {% else %}
                                <button class="btn btn-secondary btn-sm" disabled>Registered</button>
                            {% endif %}
                        {% else %}
                            <a href="{{ url_for('log_in') }}" class="btn btn-primary btn-sm">Log in to Register</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>

